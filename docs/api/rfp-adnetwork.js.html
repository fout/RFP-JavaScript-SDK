<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: rfp-adnetwork.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: rfp-adnetwork.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @namespace */
var RFP = window.RFP = window.RFP || {};
/** @namespace */
RFP.AdNetwork = RFP.AdNetwork || {};

var SpotX = function () {};

/**
 * Translate options
 *
 * @param {object} options - Raw options
 * @return {object} Translated options
 */
SpotX.prototype.translateOptions = function (options) {
    var mapping = {
        'adnetwork_adspot_id': 'channel_id',
        'width': 'content_width',
        'height': 'content_height'
    };

    var opts = {};
    Object.keys(options).forEach(function (k) {
        if (k in mapping) {
            opts[mapping[k]] = options[k];
        } else {
            opts[k] = options[k];
        }
    });

    return opts;
};

/**
 * Create script element for ad network 7
 *
 * @param {string} adSpotId
 * @param {string} channelId
 * @param {object} options
 * @return {HTMLElement} script element
 */
SpotX.prototype.createElement = function (adSpotId, channelId, options) {
    var el = document.createElement('script');
    el.type = 'text/javascript';
    el.src = '//js.spotx.tv/easi/v1/' + channelId + '.js';
    var opts = {
        'channel_id': channelId,
        'ad_unit': 'incontent',
        'content_width': 300,
        'content_height': 180,
        'loop': 0,
        'ad_volume': 0,
        'ad_max_duration': 180,
        'autoplay': 1,
    };
    for (var p in options) {
        if (p in opts) {
            opts[p] = options[p];
        }
    }

    Object.keys(opts).forEach(function (k) {
        el.setAttribute('data-spotx_' + k, opts[k]);
    });

    return el;
};

SpotX.prototype.run = function (options) {
    var opts = this.translateOptions(options);
    var el = this.createElement(
        options.adspot_id,
        options.adnetwork_adspot_id,
        opts
    );

    var scripts = document.getElementsByTagName('script');
    var script = scripts[scripts.length - 1];
    script.parentElement.insertBefore(el, script.nextSibling);
};

var AdNetworks = {
    7: SpotX
};

/**
 * Ad Network dispatcher
 *
 * @param {object} options
 * @param {string} options.adspot_id
 * @param {number} options.adnetwork_id
 * @param {string} options.adnetwork_adspot_id
 * @param {number} [options.width]
 * @param {number} [options.height]
 * @throws {TypeError} Invalid ad network id
 */
RFP.AdNetwork.run = function (options) {
    var adNetworkId = options.adnetwork_id;
    if (!(adNetworkId in AdNetworks)) {
        throw TypeError('Invalid ad network id: ' + adNetworkId);
    }

    (new AdNetworks[adNetworkId]).run(options);
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="RFP.html">RFP</a></li><li><a href="RFP.AdNetwork.html">AdNetwork</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.1</a> on Thu Jul 18 2019 03:11:52 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
